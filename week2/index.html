<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fixed Movie Recommender</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Helvetica Neue', Arial, sans-serif;
        }
        
        body {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://source.unsplash.com/random/1920x1080/?movie,theater') no-repeat center center fixed;
            background-size: cover;
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 30px;
            width: 100%;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        h1 {
            color: #e50914;
            text-align: center;
            margin-bottom: 20px;
            font-size: 2.5rem;
        }
        
        p {
            text-align: center;
            margin-bottom: 25px;
            color: #e5e5e5;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        select {
            width: 100%;
            padding: 12px 15px;
            border-radius: 4px;
            border: none;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.9);
        }
        
        button {
            width: 100%;
            padding: 12px 15px;
            background: #e50914;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 10px;
        }
        
        button:hover {
            background: #f40612;
        }
        
        #result-box {
            margin-top: 25px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            min-height: 60px;
        }
        
        #result {
            font-weight: bold;
            text-align: center;
        }
        
        .highlight {
            color: #e50914;
        }
        
        .recommended-movies {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 15px;
        }
        
        .recommended-movie {
            display: flex;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            overflow: hidden;
        }
        
        .movie-poster {
            width: 80px;
            height: 120px;
            background-size: cover;
            background-position: center;
        }
        
        .movie-details {
            padding: 10px;
            flex: 1;
        }
        
        .movie-details h4 {
            margin-bottom: 5px;
            color: #fff;
        }
        
        .movie-details p {
            text-align: left;
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: #b3b3b3;
        }
        
        .similarity-score {
            color: #4ecdc4 !important;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Fixed Movie Recommender</h1>
        <p>Select a movie you like, and we'll find similar ones for you!</p>
        
        <div class="form-group">
            <label for="movie-select">Choose a movie:</label>
            <select id="movie-select">
                <option value="" disabled selected>Select a movie...</option>
                <option value="1">The Shawshank Redemption (Drama)</option>
                <option value="2">The Godfather (Crime, Drama)</option>
                <option value="3">The Dark Knight (Action, Crime, Drama)</option>
                <option value="4">Pulp Fiction (Crime, Drama)</option>
                <option value="5">Forrest Gump (Drama, Romance)</option>
                <option value="6">Inception (Action, Adventure, Sci-Fi)</option>
                <option value="7">The Matrix (Action, Sci-Fi)</option>
                <option value="8">Goodfellas (Biography, Crime, Drama)</option>
            </select>
        </div>
        
        <button id="recommend-btn">Get Recommendations</button>
        
        <div id="result-box">
            <p id="result">Please select a movie to get recommendations.</p>
        </div>
    </div>

    <script>
        // Sample movie data with genres
        const movies = [
            {
                id: 1,
                title: "The Shawshank Redemption",
                genres: ["Drama"]
            },
            {
                id: 2,
                title: "The Godfather",
                genres: ["Crime", "Drama"]
            },
            {
                id: 3,
                title: "The Dark Knight",
                genres: ["Action", "Crime", "Drama"]
            },
            {
                id: 4,
                title: "Pulp Fiction",
                genres: ["Crime", "Drama"]
            },
            {
                id: 5,
                title: "Forrest Gump",
                genres: ["Drama", "Romance"]
            },
            {
                id: 6,
                title: "Inception",
                genres: ["Action", "Adventure", "Sci-Fi"]
            },
            {
                id: 7,
                title: "The Matrix",
                genres: ["Action", "Sci-Fi"]
            },
            {
                id: 8,
                title: "Goodfellas",
                genres: ["Biography", "Crime", "Drama"]
            },
            {
                id: 9,
                title: "The Silence of the Lambs",
                genres: ["Crime", "Drama", "Thriller"]
            },
            {
                id: 10,
                title: "Parasite",
                genres: ["Comedy", "Drama", "Thriller"]
            },
            {
                id: 11,
                title: "Interstellar",
                genres: ["Adventure", "Drama", "Sci-Fi"]
            },
            {
                id: 12,
                title: "The Departed",
                genres: ["Crime", "Drama", "Thriller"]
            },
            {
                id: 13,
                title: "Whiplash",
                genres: ["Drama", "Music"]
            },
            {
                id: 14,
                title: "Mad Max: Fury Road",
                genres: ["Action", "Adventure", "Sci-Fi"]
            },
            {
                id: 15,
                title: "Django Unchained",
                genres: ["Drama", "Western"]
            }
        ];

        // DOM elements
        const movieSelect = document.getElementById('movie-select');
        const recommendBtn = document.getElementById('recommend-btn');
        const resultBox = document.getElementById('result-box');
        const resultElement = document.getElementById('result');

        // Event listeners
        recommendBtn.addEventListener('click', getRecommendations);

        /**
         * Main function to calculate and display recommendations
         */
        function getRecommendations() {
            // Step 1: Get user input
            const selectedMovieId = parseInt(movieSelect.value);
            
            // Validate selection
            if (!selectedMovieId) {
                resultElement.textContent = 'Please select a movie first.';
                resultElement.className = 'error';
                return;
            }
            
            // Step 2: Find the liked movie
            const likedMovie = movies.find(movie => movie.id === selectedMovieId);
            
            if (!likedMovie) {
                resultElement.textContent = 'Movie not found. Please try another selection.';
                resultElement.className = 'error';
                return;
            }
            
            // Display loading message
            resultElement.textContent = `Finding recommendations for "${likedMovie.title}"...`;
            resultElement.className = 'status-message';
            
            // Calculate recommendations
            const recommendations = calculateRecommendations(likedMovie);
            
            // Display results
            displayResults(likedMovie, recommendations);
        }
        
        /**
         * Calculate movie recommendations based on genre similarity
         */
        function calculateRecommendations(likedMovie) {
            // Step 3: Prepare for similarity calculation
            const likedGenres = new Set(likedMovie.genres);
            const candidateMovies = movies.filter(movie => movie.id !== likedMovie.id);
            
            // Step 4: Calculate Jaccard similarity scores
            const scoredMovies = candidateMovies.map(candidate => {
                const candidateGenres = new Set(candidate.genres);
                
                // Calculate intersection
                const intersection = new Set(
                    [...likedGenres].filter(genre => candidateGenres.has(genre))
                );
                
                // Calculate union
                const union = new Set([...likedGenres, ...candidateGenres]);
                
                // Jaccard similarity = |Intersection| / |Union|
                const score = union.size > 0 ? intersection.size / union.size : 0;
                
                return {
                    ...candidate,
                    score: score
                };
            });
            
            // Step 5: Sort by score (descending)
            scoredMovies.sort((a, b) => b.score - a.score);
            
            // Step 6: Select top recommendations
            return scoredMovies.slice(0, 5);
        }
        
        /**
         * Display the recommendations
         */
        function displayResults(likedMovie, recommendations) {
            if (recommendations.length > 0) {
                let html = `<p>Because you liked <span class="highlight">${likedMovie.title}</span>, we recommend:</p>`;
                html += '<div class="recommended-movies">';
                
                recommendations.forEach(movie => {
                    html += `
                        <div class="recommended-movie">
                            <div class="movie-poster" style="background-image: url('https://source.unsplash.com/random/200x300/?movie,${movie.genres[0]}')"></div>
                            <div class="movie-details">
                                <h4>${movie.title}</h4>
                                <p>Genres: ${movie.genres.join(', ')}</p>
                                <p class="similarity-score">Similarity: ${(movie.score * 100).toFixed(1)}%</p>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                resultBox.innerHTML = html;
            } else {
                resultElement.textContent = 'No recommendations found.';
                resultElement.className = 'error';
            }
        }
    </script>
</body>
</html>
